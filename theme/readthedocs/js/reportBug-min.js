var feedback={};function closeSendContent(){feedback.successForm.addClass("not-visible"),feedback.popupContent.show(),feedback.wrapper.addClass("not-visible")}function sendIssue(){for(var e,t=new XMLHttpRequest,n=window.location.protocol+"//"+window.location.hostname+"/issue_report.php",o=(window.getSelection().getRangeAt(0).getBoundingClientRect().top,window.pageYOffset,feedback.textarea.val()||""),s=feedback.selectedText.text()||"",d=window.getSelection().anchorNode.parentElement,a=feedback.username.val()||"";d.outerText.length<=s.length;)d=d.parentElement;e=encodeURI("comment="+o+"&selected="+s+"&page="+window.location.pathname+"&userName="+a+"&parent="+d.outerText),t.open("POST",n,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send(e),showSuccess()}function showSuccess(){feedback.successForm=$(".successText"),feedback.popupContent=$(".popup-content"),feedback.popupContent.hide(),feedback.successForm.removeClass("not-visible"),setTimeout(function(){closeSendContent()},3e3)}!function(o){var s,d,a,c="body";$(c).ready(function(){var t="not-visible",n="disable";function e(){this.value?o.sendBtn.removeClass(n):o.sendBtn.addClass(n)}o.body=$(c),o.wrapper=s=$(".wrapper"),o.popupContent=s.children(":first"),o.description=a=s.find(".popup-description"),o.textarea=o.popupContent.find(".comment"),o.selectedText=a.find(".selected .text"),o.sendBtn=o.popupContent.find(".actions .btn"),o.successForm=o.popupContent.find(".successText"),o.username=o.popupContent.find(".name .input"),o.textarea.keyup(e).focusout(e),o.body.keypress(function(e){!e.ctrlKey||10!=e.keyCode&&13!=e.keyCode||(d=window.getSelection().toString()||"",o.wrapper.removeClass(t),d?(o.sendBtn.removeClass(n),o.description.removeClass(t),o.selectedText.text(d)):(o.sendBtn.addClass(n),o.description.addClass(t)))}),o.body.keyup(function(e){27==e.keyCode&&o.wrapper.addClass(t)})})}(feedback);